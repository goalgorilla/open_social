!function(w){function r(e){function t(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=function e(t,i){return t&&(i(t)?t:e(t.parentNode,i))}(e.target||e.srcElement,function(e){return"A"===e.tagName});if(t){for(var i,n=t.parentNode,r=t.parentNode.childNodes,o=r.length,a=0,l=0;l<o;l++)if(1===r[l].nodeType){if(r[l]===t){i=a;break}a++}return 0<=i&&s(i,n),!1}}for(var s=function(e,t,i,n){w(".iframe-container .pswp").length&&(l=w(".pswp").first(),w(".pswp").each(function(){w(this).remove()}),l.appendTo("body"));var r,o,a,l=document.querySelectorAll(".pswp")[0];if(a=function(e){for(var t,i,n,r=e.childNodes,o=r.length,a=[],l=0;l<o;l++)if(1===(e=r[l]).nodeType){t=e.children,i=e.getAttribute("data-size").split("x"),(n={src:e.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10),author:e.getAttribute("data-author")}).el=e,0<t.length&&(n.msrc=t[0].getAttribute("src"),1<t.length&&(n.title=t[1].innerHTML));var s=e.getAttribute("data-med");s&&(i=e.getAttribute("data-med-size").split("x"),n.m={src:s,w:parseInt(i[0],10),h:parseInt(i[1],10)}),n.o={src:n.src,w:n.w,h:n.h},a.push(n)}return a}(t),o={galleryUID:t.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=a[e].el.children[0],i=window.pageYOffset||document.documentElement.scrollTop,n=t.getBoundingClientRect();return{x:n.left,y:n.top+i,w:n.width}},addCaptionHTMLFn:function(e,t,i){return e.title?(t.children[0].innerHTML=e.title+"<br/><small>Photo: "+e.author+"</small>",!0):(t.children[0].innerText="",!1)}},n)if(o.galleryPIDs){for(var s=0;s<a.length;s++)if(a[s].pid==e){o.index=s;break}}else o.index=parseInt(e,10)-1;else o.index=parseInt(e,10);if(!isNaN(o.index)){for(var p=document.getElementsByName("gallery-style"),c=0,d=p.length;c<d;c++)if(p[c].checked){"radio-all-controls"==p[c].id||"radio-minimal-black"==p[c].id&&(o.mainClass="pswp--minimal--dark",o.barsSize={top:0,bottom:0},o.captionEl=!1,o.fullscreenEl=!1,o.shareEl=!1,o.bgOpacity=.85,o.tapToClose=!0,o.tapToToggleControls=!1);break}i&&(o.showAnimationDuration=0),r=new PhotoSwipe(l,PhotoSwipeUI_Default,a,o);var u,h,f=!1,g=!0;r.listen("beforeResize",function(){var e=window.devicePixelRatio?window.devicePixelRatio:1;e=Math.min(e,2.5),1200<=(u=r.viewportSize.x*e)||!r.likelyTouchDevice&&800<u||1200<screen.width?f||(h=f=!0):f&&(h=!(f=!1)),h&&!g&&r.invalidateCurrItems(),g=g&&!1,h=!1}),r.listen("gettingData",function(e,t){f?(t.src=t.o.src,t.w=t.o.w,t.h=t.o.h):(t.src=t.m.src,t.w=t.m.w,t.h=t.m.h)}),r.init()}},i=document.querySelectorAll(e),n=0,r=i.length;n<r;n++)i[n].setAttribute("data-pswp-uid",n+1),i[n].onclick=t;var o=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var i=e.split("&"),n=0;n<i.length;n++)if(i[n]){var r=i[n].split("=");r.length<2||(t[r[0]]=r[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t}();o.pid&&o.gid&&s(o.pid,i[o.gid-1],!0,!0)}Drupal.behaviors.photoSwipe={attach:function(e,t){r(".photoswipe-gallery");var i=w("body"),n=".photoswipe-item, .photoswipe-gallery";w(n).on("click",function(){i.addClass("is-pswp--open")}),w(document).on("click scroll",function(e){w(e.target).closest(n).length||(i.hasClass("is-pswp--open")&&i.removeClass("is-pswp--open"),e.stopPropagation())})}}}(jQuery);
