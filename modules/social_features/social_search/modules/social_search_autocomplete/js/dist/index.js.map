{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///./node_modules/prop-types/index.js","webpack:///external \"ReactDOM\"","webpack:///./node_modules/prop-types/factoryWithThrowingShims.js","webpack:///./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///./js/src/components/Suggestion.jsx","webpack:///./js/src/components/SearchSuggestions.jsx","webpack:///./js/src/components/Spinner.jsx","webpack:///./js/src/index.jsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","React","ReactDOM","ReactPropTypesSecret","emptyFunction","shim","props","propName","componentName","location","propFullName","secret","err","Error","getShim","isRequired","ReactPropTypes","array","bool","func","number","string","symbol","any","arrayOf","element","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","Suggestion","query","type","label","url","tags","highlightedLabel","highlight","target","loweredHighlight","toLowerCase","search","RegExp","concat","replace","parts","split","text","push","external_React_default","a","createElement","__source","fileName","_jsxFileName","lineNumber","__self","this","highlightText","markupTags","className","href","tabIndex","length","propTypes","defaultProps","SearchSuggestions","searchBase","suggestions","results","components_Suggestion","_extends","SearchSuggestions_jsxFileName","searchUrl","encodeURIComponent","Fragment","Spinner","Spinner_jsxFileName","$","Drupal","wlOrigin","window","protocol","hostname","port","behaviors","initSocialSearchAutocomplete","attach","context","settings","$searchSuggests","baseUrl","apiUrl","fetchSuggestions","socialSearchAutocomplete","basePath","searchApiUrl","callback","ajax","method","headers","Accept","Content-Type","success","data","map","path","each","index","scheduledUpdate","$searchField","searchFieldId","attr","first","getSearchFieldFor","scheduleUpdate","handler","timeout","clearTimeout","setTimeout","rerender","render","components_SearchSuggestions","searchPath","src_jsxFileName","lastValue","$formGroup","parent","on","e","searchText","keyCode","find","focus","$target","prev","is","last","next","jQuery"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","module.exports = React;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","module.exports = ReactDOM;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n/**\n * Escapes a string for use as literal RegExp value.\n *\n * @param {string} string\n *   The user string to escape.\n * @return {string}\n *   The string with all special characters escaped.\n */\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\n/**\n * Returns the target string with <b> tags around the highlight word.\n *\n * @param {string} highlight\n *   The word(s) to highlight in the target.\n * @param {string} target\n *   The string to process for highlighting.\n * @return {array}\n *   An array to make up the string that will properly be interpreted by React.\n */\nfunction highlightText(highlight, target) {\n  const loweredHighlight = highlight.toLowerCase();\n\n  // Create a capturing regular expression for splitting. This ensures that when\n  // we iterate we don't lose the search string.\n  const search = new RegExp(`(${escapeRegExp(highlight)})`, \"gi\");\n  const parts = target.split(search);\n\n  // Assemble the string again, highlighting our search term.\n  const text = [];\n\n  // eslint-disable-next-line\n  for (const i in parts) {\n    if (parts[i].toLowerCase() === loweredHighlight) {\n      text.push(<b key={i}>{parts[i]}</b>);\n    } else {\n      text.push(parts[i]);\n    }\n  }\n\n  return text;\n}\n\nfunction Suggestion(props) {\n  const { query, type, label, url, tags } = props;\n\n  const highlightedLabel = highlightText(query, label);\n\n  const markupTags = [];\n\n  // eslint-disable-next-line\n  for (const i in tags) {\n    markupTags.push(\n      <span\n        key={i}\n        className=\"search-suggestion__tag badge badge-default badge--pill\"\n      >\n        {tags[i]}\n      </span>\n    );\n  }\n\n  return (\n    <a className=\"search-suggestion\" href={url} tabIndex=\"0\">\n      <div className=\"search-suggestion__type\">{type}</div>\n      <div className=\"search-suggestion__body\">\n        <div className=\"search-suggestion__label\">{highlightedLabel}</div>\n        {tags.length ? (\n          <div className=\"search-suggestion__tags\">{markupTags}</div>\n        ) : null}\n      </div>\n    </a>\n  );\n}\n\nSuggestion.propTypes = {\n  query: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  tags: PropTypes.arrayOf(PropTypes.string),\n};\n\nSuggestion.defaultProps = {\n  tags: [],\n};\n\nexport default Suggestion;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Suggestion from \"./Suggestion\";\n\nfunction SearchSuggestions(props) {\n  const { searchBase, query, suggestions } = props;\n\n  if (!query.length || !suggestions.length) {\n    return null;\n  }\n\n  const results = [];\n\n  // eslint-disable-next-line\n  for (const i in suggestions) {\n    results.push(<Suggestion key={i} query={query} {...suggestions[i]} />);\n  }\n\n  const searchUrl = `${searchBase}/${encodeURIComponent(query)}`;\n\n  return (\n    <React.Fragment>\n      <div className=\"search-suggestions\">{results}</div>\n      <div className=\"search-suggestions__all\">\n        <a href={searchUrl} className=\"btn btn-default btn-raised\">\n          See all results\n        </a>\n      </div>\n    </React.Fragment>\n  );\n}\n\nSearchSuggestions.propTypes = {\n  searchBase: PropTypes.string.isRequired,\n  query: PropTypes.string,\n  suggestions: PropTypes.arrayOf(\n    PropTypes.shape({\n      type: PropTypes.string.isRequired,\n      label: PropTypes.string.isRequired,\n      url: PropTypes.string.isRequired,\n      tags: PropTypes.arrayOf(PropTypes.string),\n    })\n  ),\n};\n\nSearchSuggestions.defaultProps = {\n  query: \"\",\n  suggestions: [],\n};\n\nexport default SearchSuggestions;\n","import React from 'react';\n\nexport default function Spinner() {\n  return (\n    <div className=\"spinner\">\n      <div className=\"bounce1\"></div>\n      <div className=\"bounce2\"></div>\n      <div className=\"bounce3\"></div>\n    </div>\n  )\n};\n","/**\n * @file\n * Javascript for the social search autocomplete.\n */\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport SearchSuggestions from \"./components/SearchSuggestions\";\nimport Spinner from './components/Spinner';\n\n(($, Drupal) => {\n  /**\n   * Returns a function that can be used to fetch suggestions from the given url.\n   *\n   * @param {string} baseUrl\n   *   The base url for the Drupal website, ending in /.\n   * @param {string} apiUrl\n   *   The url to use for fetching suggestions.\n   * @return {Function}\n   *   The function to call with search text and callbacks.\n   */\n  function createSuggestionFetcher(baseUrl, apiUrl) {\n    /**\n     *\n     * @param {string} text\n     *   The text that suggestions should be fetched for.\n     * @param {Function} callback\n     *   The callback function that takes a search string and an array of suggestions.\n     */\n    return (text, callback) => {\n      if (!text.length) {\n        callback(text, []);\n      } else {\n        $.ajax({\n          url: `${apiUrl}/${encodeURIComponent(text)}`,\n          method: \"GET\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/hal+json\",\n          },\n          success(data) {\n            // Convert the content paths to absolute paths.\n            const suggestions = data.map(s => ({\n              type: s.type,\n              label: s.label,\n              url: baseUrl + s.path,\n            }));\n\n            callback(text, suggestions);\n          },\n        });\n      }\n    };\n  }\n\n  /**\n   * Returns a function to overwrite the previously scheduled callback.\n   *\n   * The returned function can be used instead of setTimeout and will\n   * automatically clear the timeout that was set with this scheduler if it had\n   * not yet been fired.\n   *\n   * @return {Function}\n   *   A unique updateScheduler that can be used like setTimeout.\n   */\n  function createUpdateScheduler() {\n    let scheduledUpdate = null;\n    return (handler, timeout) => {\n      if (scheduledUpdate) {\n        clearTimeout(scheduledUpdate);\n        scheduledUpdate = null;\n      }\n      scheduledUpdate = setTimeout(() => {\n        scheduledUpdate = null;\n        handler();\n      }, timeout);\n    };\n  }\n\n  /**\n   * Returns the search field corresponding to a search suggestion field.\n   *\n   * @param {DOMElement} element\n   *   The element for which to find the search field.\n   * @return {jQuery}\n   *   A jQuery reference to the search field.\n   */\n  function getSearchFieldFor(element) {\n    const searchFieldId = $(element).attr(\"data-search-suggestions-for\");\n\n    if (!searchFieldId) {\n      throw new Error(\n        `Search suggestion element does not have an associated search field (${element}).`\n      );\n    }\n\n    const $searchField = $(`#${searchFieldId}`);\n\n    if (!$searchField.length) {\n      throw new Error(\n        `Could not find search element with id '${searchFieldId}'`\n      );\n    }\n\n    return $searchField.first();\n  }\n\n  // window.location.origin is not supported in IE so we use this instead.\n  const wlOrigin = `${window.location.protocol}//${window.location.hostname}${\n    window.location.port ? `:${window.location.port}` : \"\"\n  }`;\n\n  /**\n   * Initialises the React rendering for the search suggestions.\n   *\n   * Handles input events on the search field and React rendering in the\n   * provided container.\n   *\n   * @type {Drupal~behavior}\n   */\n  Drupal.behaviors.initSocialSearchAutocomplete = {\n    attach(context, settings) {\n      // TODO: Only load React if it's not yet loaded.\n      // TODO: Ideally only load when search is visible.\n\n      // Find all search suggestion containers to set-up.\n      const $searchSuggests = $(\".social-search-suggestions\", context);\n\n      if (!$searchSuggests.length) {\n        return;\n      }\n\n      const fetchSuggestions = createSuggestionFetcher(\n        wlOrigin + settings.socialSearchAutocomplete.basePath,\n        settings.socialSearchAutocomplete.searchApiUrl\n      );\n\n      $searchSuggests.each((index, element) => {\n        // Resolve the search field for this suggestions box.\n        const $searchField = getSearchFieldFor(element);\n\n        // Create a callback scheduler specific to this search field.\n        const scheduleUpdate = createUpdateScheduler();\n\n        // Our React render function for this search suggestion box.\n        const rerender = (query, suggestions) => {\n          ReactDOM.render(\n            <SearchSuggestions\n              searchBase={settings.socialSearchAutocomplete.searchPath}\n              query={query}\n              suggestions={suggestions}\n            />,\n            element\n          );\n        };\n\n        // Store the input value to detect actual changes.\n        let lastValue = null;\n\n        // Store the form group for this searchField. This is used to find the\n        // search results for keyboard navigation.\n        const $formGroup = $searchField.parent();\n\n        $searchField.on(\"keyup\", e => {\n          const searchText = e.target.value;\n\n          if (searchText !== lastValue) {\n            // When there is a change, wait a short moment for more changes.\n            scheduleUpdate(() => {\n              // Render our spinner. It will get overwritten by our results.\n              ReactDOM.render(<Spinner />, element);\n              fetchSuggestions(searchText, rerender);\n            }, 200);\n\n            lastValue = searchText;\n          }\n\n          // Handle up arrow for keyboard navigation.\n          if (e.keyCode === 38) {\n            // Focus the last available search suggestion, if any.\n            $formGroup\n              .find(\".search-suggestions .search-suggestion\")\n              .get(-1)\n              .focus();\n          }\n          // Handle down arrow for keyboard navigation.\n          else if (e.keyCode === 40) {\n            $formGroup\n              .find(\".search-suggestions .search-suggestion\")\n              .get(0)\n              .focus();\n          }\n        });\n\n        // Implement keyboard navigation. This could possible be better handled\n        // within React itself but then we'd also want to control the search\n        // input element so we're leaving that for a later date.\n        $formGroup.find(\".social-search-suggestions\").on(\"keyup\", e => {\n          // Handle up arrow for keyboard navigation.\n          if (e.keyCode === 38) {\n            let $target = $(e.target).prev();\n\n            // Move to the search index if we go beyond the top result.\n            if (!$target.length) {\n              if (\n                $(e.target)\n                  .parent()\n                  .is(\".search-suggestions__all\")\n              ) {\n                $target = $(\".search-suggestions .search-suggestion\").last();\n              } else {\n                $target = $searchField;\n              }\n            }\n\n            $target.focus();\n          } else if (e.keyCode === 40) {\n            let $target = $(e.target).next();\n\n            // Wrap around to all search results button or search field.\n            if (!$target.length) {\n              if (\n                $(e.target)\n                  .parent()\n                  .is(\".search-suggestions__all\")\n              ) {\n                $target = $searchField;\n              } else {\n                $target = $(\".search-suggestions__all a\").first();\n              }\n            }\n\n            $target.focus();\n          }\n        });\n\n        // Render our suggestions for the first time.\n        rerender(\"\", []);\n      });\n    },\n  };\n})(jQuery, Drupal);\n"],"sourceRoot":""}