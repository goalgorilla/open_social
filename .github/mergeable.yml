version: 2
mergeable:
  - when: pull_request.opened # New contributor.
    filter:
      - do: author
        must_exclude:
          regex: 'dependabot'
    pass:
      - do: comment
        payload:
          body: >
            Thanks for contributing towards Open Social! A maintainer from @goalgorilla/maintainers will review your changes shortly. Please don't be discouraged if it takes a while.
            In the meantime, we have some automated checks running and it might be that you will see me comment with some tips or requests to speed up the review process. :blush:

  - when: pull_request.*
    name: "Valid issue title"
    validate:
      - do: and
        validate:
          - do: title
            must_include:
              regex:
                - "^Issue #"
                - "^Internal"
                - "^Updates:"
          - do: description
            no_empty:
              enabled: false # Cannot be empty when true.
            must_include:
              regex:
                - "^Issue #"
                - "^Internal"
                - "^Updates:"
    fail:
      - do: comment
        payload:
          body: >
            In order for us to match your pull request to the correct open source or internal issue, the title should either:
              - begin with a reference to a Drupal.org issue number in the format of "Issue #issuenumber"
              - begin with Internal: if it's related to an internal ticket
              - begin with Updates: if we are updating one of our dependencies
